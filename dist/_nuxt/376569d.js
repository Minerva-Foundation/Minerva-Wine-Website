(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1010:function(e,t,r){"use strict";r(981)},1011:function(e,t,r){var o=r(54)(!1);o.push([e.i,'.wrappercardsCrowdCard{height:730px;display:grid;grid-template-columns:55% 45%;grid-template-rows:65% 35%;grid-template-areas:"info image" "crowdInfo crowdInfo";padding:45px;box-sizing:border-box;border-right:1px solid #ccc;border-bottom:1px solid #ccc;color:#333;background-color:#fff;font-size:max(1em,12px);position:relative}@media screen and (max-height:950px),screen and (max-width:1330px){.wrappercardsCrowdCard{height:680px}}@media screen and (max-height:900px),screen and (max-width:1180px){.wrappercardsCrowdCard{height:630px}}@media screen and (max-width:1085px){.wrappercardsCrowdCard{height:auto}}@media screen and (max-width:525px){.wrappercardsCrowdCard{padding:32px 32px 43px}}@media screen and (max-width:435px){.wrappercardsCrowdCard{padding:25px 20px 40px}}.wrappercardsCrowdCard .info{display:flex;flex-direction:column;margin-right:10px}.wrappercardsCrowdCard .info>*{margin-bottom:10px}.wrappercardsCrowdCard .info .title{position:relative;margin-bottom:5px}.wrappercardsCrowdCard .info .title a{text-decoration:none;color:#333;word-wrap:break-word}.wrappercardsCrowdCard .info .title .titleText{font-size:max(2.875em,32px);font-family:"Roslindale";word-wrap:break-word}.wrappercardsCrowdCard .info .title .linkArrow{font-size:1.2em;position:absolute;bottom:12px;margin-left:5px;color:#777}.wrappercardsCrowdCard .info .shortInfo{color:#777;margin-bottom:20px;margin-top:15px}.wrappercardsCrowdCard .info .infoItem{font-size:1.05em;color:#333}.wrappercardsCrowdCard .info .tc .infoItem{display:flex;position:relative;cursor:default;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content}.wrappercardsCrowdCard .info .tc .infoItem .countryInfo{position:absolute;top:calc(100% + 10px);width:400px;max-width:70vw;display:none}.wrappercardsCrowdCard .info .tc .infoItem .countryInfo .text{display:inline-block;height:auto;white-space:pre-line}.wrappercardsCrowdCard .info .tc .infoItem .countryInfo .text:after{left:10%}.wrappercardsCrowdCard .info .tc .infoItem .infoIcon{position:relative;font-size:.8em;color:#777;left:4px}.wrappercardsCrowdCard .info .tc .infoItem .fileName{overflow:hidden;text-overflow:ellipsis;direction:rtl;margin-left:-3px}.wrappercardsCrowdCard .info .tc .infoItem:hover .countryInfo{display:block}.wrappercardsCrowdCard .info .meta{display:flex;flex-direction:column}.wrappercardsCrowdCard .info .catName{color:#777;text-transform:uppercase;font-size:1.05em}.wrappercardsCrowdCard .info .country{display:flex;align-items:center;margin-bottom:20px}.wrappercardsCrowdCard .info .country .countryName{text-transform:uppercase;color:#d6a11a;margin-left:15px;font-size:max(1.125em,14px)}.wrappercardsCrowdCard .info .country .flag img{border:1px solid rgba(0,0,0,.2);max-width:39px;height:39px;border-radius:50%}@media screen and (max-width:643px){.wrappercardsCrowdCard .info .country .flag img{height:25px;max-width:25px}}.wrappercardsCrowdCard .timer{margin-top:10px;margin-bottom:50px;color:#777;font-size:1.3em}@media screen and (max-width:643px){.wrappercardsCrowdCard .timer{margin-top:0;margin-bottom:15px}}.wrappercardsCrowdCard .timer .time{font-size:1em;color:#333}.wrappercardsCrowdCard .image{margin-left:20px;cursor:pointer}.wrappercardsCrowdCard .image .thumbnail{width:100%;height:100%}@media screen and (max-width:1085px){.wrappercardsCrowdCard .image .thumbnail{max-height:275px}}.wrappercardsCrowdCard .image .thumbnail img{width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.wrappercardsCrowdCard .crowdInfo{grid-area:crowdInfo;display:flex;flex-direction:column;justify-content:flex-end}@media screen and (max-width:1085px){.wrappercardsCrowdCard .crowdInfo{margin-top:40px}}.wrappercardsCrowdCard .crowdInfo .rest{display:flex}.wrappercardsCrowdCard .crowdInfo .rest .purchaseInfo{display:flex;flex-direction:column;justify-content:flex-start;margin-right:40px}@media screen and (max-width:435px){.wrappercardsCrowdCard .crowdInfo .rest .purchaseInfo{margin-right:0;padding-right:20px;box-sizing:border-box}}.wrappercardsCrowdCard .crowdInfo .rest .purchaseInfo .case{font-size:.875em;color:#777;padding-bottom:5px;padding-right:10px;box-sizing:border-box}.wrappercardsCrowdCard .crowdInfo .rest .purchaseInfo .price{font-family:"Roslindale";font-size:3.5em}@media screen and (max-width:400px){.wrappercardsCrowdCard .crowdInfo .rest .purchaseInfo .price{line-height:.7;margin-top:5px}}.wrappercardsCrowdCard .crowdInfo .rest .purchaseInfo .price .smaller{font-family:"Roslindale";font-size:.5em}.wrappercardsCrowdCard .crowdInfo .rest .buy{display:flex;flex-direction:column;justify-content:flex-end}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns{padding-bottom:10px;display:flex}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns button{min-width:0;padding-left:26px;padding-right:26px;height:59px!important;font-size:1em}@media screen and (max-height:950px),screen and (max-width:1330px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns button{height:52px!important}}@media screen and (max-height:900px),screen and (max-width:1180px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns button{height:49px!important}}@media screen and (max-width:643px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns button{height:42px!important}}@media screen and (max-width:525px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns button{padding-left:20px!important;padding-right:20px!important;min-width:0!important;min-height:0!important}}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .buttonLight{color:#8b8b8b;border-color:#adadad;border-width:1px;margin-left:12px}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .buttonLight:after{content:"MORE INFO";position:relative;bottom:auto;left:auto;width:auto;background-color:transparent}@media screen and (max-width:525px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .buttonLight:after{content:"MORE"}}@media screen and (max-width:435px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .buttonLight:after{content:"â„¹";font-size:1.6em}}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .buttonLight:hover{color:#fff;border-color:#fff}@media screen and (max-width:435px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .buttonLight{padding:0!important;width:39px}}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .ios:after{content:"i"}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase{display:flex;position:relative;overflow:visible}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .amountWarning{position:absolute;bottom:100%;left:0;width:180%}@media screen and (max-width:600px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .amountWarning{width:188px}}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .amount{border-top-left-radius:7px;border-bottom-left-radius:7px;border:1px solid #adadad;width:40px;color:#777;font-size:1.5em;text-align:center}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .amount:focus{border:1px solid #8b8b8b;outline:none}@media screen and (max-width:525px){.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .amount{width:30px;font-size:1.2em}}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .warn{color:#d6a11a}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .button{border-top-left-radius:0;border-bottom-left-radius:0}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .endedBtn{padding-left:46.3px;padding-right:46.3px;pointer-events:none;border-top-left-radius:7px;border-bottom-left-radius:7px}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .greyedOut{background-color:#bebebe;cursor:default}.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .greyedOut:after,.wrappercardsCrowdCard .crowdInfo .rest .buy .btns .purchase .greyedOut:before{content:none}.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer{font-size:.81em;display:flex;align-items:flex-start;position:relative}.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer .tcWarningTT{z-index:2;position:absolute;bottom:100%;left:-17px}.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer input{margin-top:1px;margin-right:8px;filter:saturate(0);cursor:pointer}@media screen and (max-height:900px),screen and (max-width:1180px){.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer input{margin-top:0}}.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer .warn{box-shadow:inset 0 0 0 3px #505050;filter:saturate(100%)}.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer label{cursor:pointer}.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer label a{color:#d6a11a}.wrappercardsCrowdCard .crowdInfo .rest .buy .disclaimer label .greyedOut{color:#777}.wrappercardsCrowdCard .crowdInfo .lessInfo{padding-bottom:8px}@media screen and (max-width:1085px){.wrappercardsCrowdCard .crowdInfo .lessInfo{padding-bottom:0}}.wrappercardsCrowdCard .crowdInfo .progress{display:flex;flex-direction:column;justify-content:flex-end;font-size:.875em;margin-top:20px;margin-bottom:5px;position:relative;color:#777}@media screen and (max-width:450px){.wrappercardsCrowdCard .crowdInfo .progress{margin-top:10px}}.wrappercardsCrowdCard .crowdInfo .progress .progressBar{margin-top:5px;width:100%;border-radius:0;height:5px;position:relative;background-color:#e9e9e9;display:flex}.wrappercardsCrowdCard .crowdInfo .progress .progressBar .value{height:100%;background-color:#d6a11a;display:inline-block}.wrappercardsCrowdCard .crowdInfo .progress .progressBar .label{position:absolute;bottom:10px;color:#777}.wrappercardsCrowdCard .crowdInfo .progress .progressBar .labelMimax{position:absolute;top:10px;color:#777}.wrappercardsCrowdCard .crowdInfo .progress .progressBar .max{right:0}.wrappercardsCrowdCard .crowdInfo .progress .progressBar .minMark{top:5px;border-right:2px solid #999;position:absolute;height:18px}.wrappercardsCrowdCard .crowdInfo .progress .progressBar .minMark .minText{position:absolute;top:5px;left:8px}.wrappercardsCrowdCard .crowdInfo .progress .progress::-webkit-progress-bar{background-color:#e9e9e9}.wrappercardsCrowdCard .crowdInfo .progress .progress::-webkit-progress-value{background-color:#d6a11a!important}.wrappercardsCrowdCard .crowdInfo .progress .progress::-moz-progress-bar{background-color:#d6a11a!important}.wrappercardsCrowdCard .buyingProcess{position:absolute;top:1px;left:1px;width:calc(100% - 2px);height:calc(100% - 2px);background-color:hsla(0,0%,100%,.962);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:10;display:flex;justify-content:center;align-items:center}.wrappercardsCrowdCard .buyingProcess .content{display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:65%}.wrappercardsCrowdCard .buyingProcess .content .overlayText{text-align:center;color:#888;font-size:1.6em}.wrappercardsCrowdCard .buyingProcess .content .overlayTextSmaller{text-align:center;color:#888;font-size:1.2em;margin-top:10px;white-space:pre-line}.wrappercardsCrowdCard .buyingProcess .content .button{min-width:100px!important;height:auto!important;min-height:45px;padding:0 5px 0 10px;font-size:.85rem;position:relative;margin-top:40px}.wrappercardsCrowdCard .buyingProcess .content .button .linkArrow{position:relative;padding-left:5px;bottom:1px;color:#eee;font-size:.8em}@media screen and (max-width:530px){.wrappercardsCrowdCard .buyingProcess .content .button{min-width:120px!important;height:auto!important;min-height:45px;padding:0 5px;font-size:.85rem}}@media screen and (max-width:530px)and (max-width:417px){.wrappercardsCrowdCard .buyingProcess .content .button{font-size:1rem}}.wrappercardsCrowdCard .buyingProcess .close{position:absolute;top:20px;right:17px;background-color:transparent;border:none;cursor:pointer}.wrappercardsCrowdCard .buyingProcess .close svg{width:14px;height:14px}.wrappercardsCrowdCard .buyingProcess .dot-pulse{margin-top:30px;position:relative;left:-9999px;width:8px;height:8px;border-radius:50%;background-color:#999;color:#999;box-shadow:9999px 0 0 -5px #999;-webkit-animation:dotPulse 1.5s linear infinite;animation:dotPulse 1.5s linear infinite;-webkit-animation-delay:.25s;animation-delay:.25s}.wrappercardsCrowdCard .buyingProcess .dot-pulse:after,.wrappercardsCrowdCard .buyingProcess .dot-pulse:before{content:"";display:inline-block;position:absolute;top:0;width:8px;height:8px;border-radius:50%;background-color:#999;color:#999}.wrappercardsCrowdCard .buyingProcess .dot-pulse:before{box-shadow:9975px 0 0 -5px #999;-webkit-animation:dotPulseBefore 1.5s linear infinite;animation:dotPulseBefore 1.5s linear infinite;-webkit-animation-delay:0s;animation-delay:0s}.wrappercardsCrowdCard .buyingProcess .dot-pulse:after{box-shadow:10023px 0 0 -5px #999;-webkit-animation:dotPulseAfter 1.5s linear infinite;animation:dotPulseAfter 1.5s linear infinite;-webkit-animation-delay:.5s;animation-delay:.5s}@-webkit-keyframes dotPulseBefore{0%{box-shadow:9975px 0 0 0 #999}30%{box-shadow:9975px 0 0 2px #999}60%,to{box-shadow:9975px 0 0 0 #999}}@keyframes dotPulseBefore{0%{box-shadow:9975px 0 0 0 #999}30%{box-shadow:9975px 0 0 2px #999}60%,to{box-shadow:9975px 0 0 0 #999}}@-webkit-keyframes dotPulse{0%{box-shadow:9999px 0 0 0 #999}30%{box-shadow:9999px 0 0 2px #999}60%,to{box-shadow:9999px 0 0 0 #999}}@keyframes dotPulse{0%{box-shadow:9999px 0 0 0 #999}30%{box-shadow:9999px 0 0 2px #999}60%,to{box-shadow:9999px 0 0 0 #999}}@-webkit-keyframes dotPulseAfter{0%{box-shadow:10023px 0 0 0 #999}30%{box-shadow:10023px 0 0 2px #999}60%,to{box-shadow:10023px 0 0 0 #999}}@keyframes dotPulseAfter{0%{box-shadow:10023px 0 0 0 #999}30%{box-shadow:10023px 0 0 2px #999}60%,to{box-shadow:10023px 0 0 0 #999}}.filler{background-color:transparent;border:none}@media screen and (max-width:1085px){.filler{height:0;padding:0}}.large{grid-template-columns:65% 35%}.large .info{display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;justify-content:flex-start;position:relative;font-size:1.15em}.large .info>*{min-width:100%}.large .info .title{font-size:1.1em}.large .info .country{position:relative;top:-10px;font-size:1.1em}.large .info .meta{position:relative;top:0;min-width:40%}.large .info .date,.large .info .tc,.large .info .vintage{top:0}.large .rest{grid-gap:50px;gap:50px;position:relative}.large .timer{top:10px;position:relative;display:flex;height:28px;flex-direction:column}.large .progressBar{height:6px!important}.soonCard{position:relative}.soonCard .soonText{grid-area:crowdInfo;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:4em;color:#777;font-family:"Roslindale";box-sizing:border-box}@media screen and (max-width:1085px){.soonCard .soonText{padding-top:50px}}@media screen and (max-width:450px){.soonCard .soonText{font-size:2.8em}}.soonCard .soonText .smaller{font-size:.25em;display:flex;justify-content:center}@media screen and (max-width:450px){.soonCard .soonText .smaller{font-size:.4em}}.soonCard .soonText .smaller img{margin-left:7px;margin-top:-1px;height:17px;filter:invert(46%) sepia(0) saturate(1258%) hue-rotate(193deg) brightness(102%) contrast(105%)}@media screen and (max-width:450px){.soonCard .soonText .smaller img{height:15px}}',""]),e.exports=o},964:function(e,t,r){"use strict";r.r(t);var o=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"smaller"},[e._v("Quality Wines"),o("img",{attrs:{src:r(240),alt:"Minerva logo"}})])}],n=r(13),d=(r(84),r(516),r(28),r(97),r(75),r(114),r(140),r(141),r(56),r(4)),l=r(24),c=r(477),w=r(307),f=r(53),m=r(197),h=d.a.extend({name:"CrowdfundCard",props:{crowdF:{type:Object,required:!0},large:{type:Boolean,required:!1,default:!1},onDetailSite:{type:Boolean,required:!1,default:!1}},data:function(){return{cfbInfo:{},amount:1,timeLeft:"",timeToStart:"",started:!1,ended:!1,tcFileName:"",amountOverMax:!1,loadingChainData:!0,prevAmount:1,polling:null,timecalc:null,chainRefreshIntervall:5e3,chainPolling:!1,gasEstimate:0,wallet:{},controllerGetTries:0,walletController:{},status:"",subscription:null,tcChecked:!1,warnTCs:!1,loading:!1,overlay:!1,queryBuyTX:!1,overlayText:"",overlayTextSmaller:"",showMWLink:!1,txInfoTries:0}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.crowdF.soon){t.next=7;break}return t.next=3,Object(w.a)(e.crowdF.contract,e.$sanity);case 3:r=t.sent,e.loadingChainData=!1,e.cfbInfo=r,e.waitForController();case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){this.getTimeLeft()},beforeDestroy:function(){clearInterval(this.polling),clearInterval(this.timecalc),this.subscription&&this.subscription.unsubscribe()},methods:{buy:function(){var e,t=this;this.overlayText="",this.overlayTextSmaller="",this.showMWLink=!1,this.ended||("ready"===this.status?this.tcChecked?(this.overlay=!0,this.warnTCs=!1,c.a.config.chainID!==(null===(e=this.wallet)||void 0===e?void 0:e.network.chainID)?(this.overlayText="Please conntect your wallet to the "+("bombay-12"===c.a.config.chainID?c.a.config.chainID+" testnet":"columbus-5"===c.a.config.chainID?c.a.config.chainID+" mainnet":c.a.config.chainID+" network")+" and reload the page!",setTimeout((function(){t.overlay=!1}),3e3)):(this.loading=!0,this.overlayText="Confirm the purchase of "+this.amount+(1===this.amount?" case":" cases")+" for a total of "+this.cfbInfo.price*Number(this.amount)+" UST in your wallet.",this.postTx())):this.warnTCs=!0:(Object(m.a)(!0),this.tcChecked?this.queryBuyTX=!0:(this.warnTCs=!0,this.queryBuyTX=!1)))},subscribeWallet:function(){var e=this;this.subscription=this.walletController.connectedWallet().subscribe((function(t){var r;e.wallet=t,t?t.availablePost?(e.status="ready",e.queryBuyTX&&(e.overlay=!0,e.warnTCs=!1,c.a.config.chainID!==(null===(r=e.wallet)||void 0===r?void 0:r.network.chainID)?(e.overlayText="Please conntect your wallet to the "+("bombay-12"===c.a.config.chainID?c.a.config.chainID+" testnet":"columbus-5"===c.a.config.chainID?c.a.config.chainID+" mainnet":c.a.config.chainID+" network")+" and reload the page!",setTimeout((function(){e.overlay=!1}),3e3)):(e.loading=!0,e.overlayText="Confirm the purchase of "+e.amount+(1===e.amount?" case":" cases")+" for a total of "+e.cfbInfo.price*Number(e.amount)+" UST in your wallet.",e.postTx()))):e.status="can-not-post":e.status="not-connected"}))},getTxInfo:function(e,t){var r=this;return new Promise((function(o,n){setInterval((function(){t.txInfo(e.result.txhash).then((function(e){o(e)})).catch((function(){r.txInfoTries++>=15&&n(new Error("Timed out"))}))}),2e3)}))},postTx:function(){var e=this;if(this.wallet){var t=new l.TxAPI(c.a),r=new l.MsgExecuteContract(this.wallet.terraAddress,this.crowdF.contract,{purchase:{number_of_tokens:Number(this.amount)}},[new l.Coin("uusd",Number(this.amount)*this.cfbInfo.price*1e6)]);c.a.auth.accountInfo(this.wallet.terraAddress).then((function(o){var n=o;t.estimateFee([{sequenceNumber:n.sequence}],{msgs:[r]}).then((function(o){e.wallet&&e.wallet.post({msgs:[r],fee:o}).then((function(r){e.overlayText="Success!",e.overlayTextSmaller="Waiting for transaction results",e.getTxInfo(r,t).then((function(t){if(e.loading=!1,e.showMWLink=!0,e.overlayText="Success!",e.overlayTextSmaller="",null==t?void 0:t.logs){var r=t.logs[0].eventsByType.from_contract.number_of_tokens_purchased[0];r<e.amount?e.overlayTextSmaller="Only "+r+(1===Number(r)?" case was":" cases were ")+" purchased due to reaching the maximum purchase limit or selling out. Excess UST was returned.":e.overlayTextSmaller="You bought "+r+(1===Number(r)?" case.":" cases.")}e.overlayTextSmaller=e.overlayTextSmaller+"\nYou will receive your wine after the crowdfund"+(e.cfbInfo.min>0&&e.cfbInfo.min>e.cfbInfo.current?" and if the minimum of "+e.cfbInfo.min+" cases sold is reached. Otherwise you will be refunded":"")+".",setTimeout((function(){e.overlay=!1}),12e3)})).catch((function(){e.loading=!1,e.overlayText="Something went wrong! Please try again.",setTimeout((function(){e.overlay=!1}),5e3)}))})).catch((function(){e.loading=!1,e.overlayText="Something went wrong! Please try again.",setTimeout((function(){e.overlay=!1}),5e3)}))})).catch((function(){e.loading=!1,e.overlayText="Something went wrong!",e.overlayTextSmaller="Either you do not have enough UST or you reached your maximum purchase limit.",setTimeout((function(){e.overlay=!1}),6e3)}))}))}},waitForController:function(){var e=this;void 0===Object(f.a)()&&this.controllerGetTries++<10?setTimeout((function(){e.waitForController()}),50):(this.walletController=Object(f.a)(),this.subscribeWallet())},getChainData:function(){var e=this;this.polling=setInterval((function(){Object(w.a)(e.crowdF.contract,e.$sanity).then((function(t){e.cfbInfo=t}))}),this.chainRefreshIntervall)},getTimeLeft:function(){var e=this;this.timecalc=setInterval((function(){var t=(new Date).getTime(),r=Date.parse(e.crowdF.start)-t,o=Date.parse(e.crowdF.end)-t;if(e.cfbInfo.current>=e.crowdF.maxSold)e.ended=!0,e.chainPolling&&(clearInterval(e.polling),e.chainPolling=!1),clearInterval(e.timecalc);else if(r>0&&!e.cfbInfo.started){e.ended=!1,r<6e4&&(e.chainRefreshIntervall=1e3,e.chainPolling||(e.getChainData(),e.chainPolling=!0));var n=Math.floor(r/864e5),d=Math.floor(r%864e5/36e5),l=Math.floor(r%36e5/6e4)+1;e.timeToStart=n+"d "+d+"h "+l+"m "}else if(r<0&&!e.cfbInfo.started&&o>0)e.ended=!1,e.timeToStart="...",500!==e.chainRefreshIntervall&&(e.chainRefreshIntervall=500,clearInterval(e.polling),e.getChainData()),e.chainPolling||(e.getChainData(),e.chainPolling=!0);else if(o>0&&e.cfbInfo.started){e.started=!0,e.ended=!1,5e3!==e.chainRefreshIntervall&&(e.chainRefreshIntervall=5e3,clearInterval(e.polling),e.getChainData()),e.chainPolling||(e.getChainData(),e.chainPolling=!0);var c=Math.floor(o/864e5),w=Math.floor(o%864e5/36e5),f=Math.floor(o%36e5/6e4)+1;e.timeLeft=c+"d "+w+"h "+f+"m "}else e.ended=!0,e.chainPolling&&(clearInterval(e.polling),e.chainPolling=!1),clearInterval(e.timecalc)}),1e3)},isAllowed:function(e){var t=this,r=Array.from({length:this.cfbInfo.maxBuy},(function(e,t){return(t+1).toString()}));this.prevAmount="",r.includes(this.amount.toString()+e.key.toString())?this.amountOverMax=!1:(e.preventDefault(),this.amountOverMax=!0,"0"===e.key.toString()?this.amount=1:this.amount=this.cfbInfo.maxBuy,setTimeout((function(){t.amountOverMax=!1}),2e3))},preventSelect:function(e){e.target.selectionStart=e.target.selectionEnd},clearAmoung:function(){this.prevAmount=this.amount,this.amount=""},restorePrevAmount:function(){""!==this.prevAmount&&(this.amount=this.prevAmount),""===this.amount&&(this.amount=1)}}}),x=(r(1010),r(30)),component=Object(x.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return"filler"!==e.crowdF.slug.current.substring(0,6)?r("div",{staticClass:"wrappercardsCrowdCard",class:{large:e.large,soonCard:e.crowdF.soon}},[e.overlay?r("div",{staticClass:"buyingProcess"},[r("button",{staticClass:"close",on:{click:function(t){e.overlay=!1,e.loading=!1}}},[r("svg",{attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"#999",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}})])]),e._v(" "),r("div",{staticClass:"content"},[""!==e.overlayText?r("span",{staticClass:"overlayText"},[e._v(e._s(e.overlayText))]):e._e(),e._v(" "),""!==e.overlayTextSmaller?r("span",{staticClass:"overlayTextSmaller"},[e._v(e._s(e.overlayTextSmaller))]):e._e(),e._v(" "),e.showMWLink?r("NuxtLink",{attrs:{to:"/club/myClub/myAssets"}},[r("button",{staticClass:"button"},[e._v("\n          MY WINE"),r("span",{staticClass:"linkArrow"},[e._v("â†—")])])]):e._e(),e._v(" "),e.loading?r("div",{staticClass:"dot-pulse"}):e._e()],1)]):e._e(),e._v(" "),r("div",{staticClass:"info"},[r("div",{staticClass:"title"},[r("NuxtLink",{attrs:{to:"/wine/"+e.crowdF.merchant.slug.current}},[r("span",{staticClass:"titleText"},[e._v(e._s(e.crowdF.merchant.title))]),e.$device.isIos?e._e():r("span",{staticClass:"linkArrow"},[e._v("â†—")])])],1),e._v(" "),r("div",{staticClass:"country"},[r("portableImage",{staticClass:"flag",attrs:{asset:e.crowdF.merchant.flag.asset,"new-height":"40",alt:e.crowdF.country+" flag"}}),e._v(" "),r("span",{staticClass:"countryName"},[e._v(e._s(e.crowdF.country))])],1),e._v(" "),r("div",{staticClass:"variety meta"},[r("span",{staticClass:"catName"},[e._v("Variety")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.variety))])]),e._v(" "),r("div",{staticClass:"type meta"},[r("span",{staticClass:"catName"},[e._v("Type")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.type))])]),e._v(" "),r("div",{staticClass:"vintage meta"},[r("span",{staticClass:"catName"},[e._v("Vintage")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.vintage))])]),e._v(" "),r("div",{staticClass:"date meta"},[r("span",{staticClass:"catName"},[e._v("Delivery Snapshot Date")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.date))])]),e._v(" "),r("div",{staticClass:"tc meta"},[r("span",{staticClass:"catName"},[e._v("Delivery Available To")]),e._v(" "),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.countryShorts)+"\n        "),e.crowdF.soon?e._e():r("span",{staticClass:"infoIcon"},[e._v(" â“˜")]),e._v(" "),e.crowdF.soon?e._e():r("infoWarningTooltip",{staticClass:"countryInfo",attrs:{text:e.crowdF.countryLongs+"\n\n * Minerva reserves the right to expand this list of delivery locations prior to delivery, and will announce any additions through official channels."}})],1)]),e._v(" "),e.crowdF.soon?e._e():r("div",{staticClass:"timer"},[r("span",{staticClass:"timerLabel"},[e._v(e._s(e.ended?"":e.started?"TIME LEFT":e.loadingChainData?"":"STARTS IN"))]),r("span",{staticClass:"time"},[e._v("\n        -\n      ")])])]),e._v(" "),r("div",{staticClass:"image",on:{click:function(t){return e.$router.push({path:"/wine/"+e.crowdF.merchant.slug.current})}}},[r("portableImage",{staticClass:"thumbnail",attrs:{asset:e.crowdF.cardImage.asset,"new-height":"1000",alt:e.crowdF.merchant.title+" Crowdloan Thumbnail"}})],1),e._v(" "),e.crowdF.soon?r("div",{staticClass:"soonText"},[e._v("\n    COMING SOON"),e._m(0)]):e._e(),e._v(" "),e.crowdF.soon?e._e():r("div",{staticClass:"crowdInfo"},[r("div",{staticClass:"rest",class:{lessInfo:e.ended}},[r("div",{staticClass:"purchaseInfo"},[r("span",{staticClass:"case"},[e._v("Case Of 6 Bottles")]),e._v(" "),r("span",{staticClass:"price"},[e._v(e._s(e.cfbInfo.price)+" "),r("span",{staticClass:"smaller"},[e._v("USD")])])]),e._v(" "),r("div",{staticClass:"buy"},[r("div",{staticClass:"btns"},[r("div",{staticClass:"purchase"},[e.amountOverMax?r("infoWarningTooltip",{staticClass:"amountWarning",attrs:{text:"Max possible amount is "+e.cfbInfo.maxBuy,upsidedown:!0}}):e._e(),e._v(" "),e.ended?e._e():r("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],staticClass:"amount noselect",class:{warn:e.amountOverMax},attrs:{type:"text",title:"Max: "+e.cfbInfo.maxBuy},domProps:{value:e.amount},on:{select:function(t){return e.preventSelect(t)},keypress:function(t){return e.isAllowed(t)},focus:e.clearAmoung,blur:e.restorePrevAmount,input:function(t){t.target.composing||(e.amount=t.target.value)}}}),e._v(" "),r("button",{staticClass:"button",class:{greyedOut:!e.started&&!e.ended,endedBtn:e.ended},attrs:{title:"Max: "+e.cfbInfo.maxBuy},on:{click:function(t){return t.stopPropagation(),e.buy.apply(null,arguments)}}},[e._v("\n              "+e._s(e.ended?" ENDED ":"BUY NOW")+"\n            ")])],1),e._v(" "),e.onDetailSite?r("a",{on:{click:function(t){return e.$emit("infoClicked")}}},[r("button",{staticClass:"buttonLight"})]):r("NuxtLink",{attrs:{to:{path:"/wine/cf/"+e.crowdF.slug.current}}},[r("button",{staticClass:"buttonLight",class:{ios:e.$device.isIos}})])],1),e._v(" "),e.ended?e._e():r("span",{staticClass:"disclaimer"},[e.warnTCs?r("infoWarningTooltip",{staticClass:"tcWarningTT",attrs:{upsidedown:!0,text:"Please accept the Terms and Conditions"}}):e._e(),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.tcChecked,expression:"tcChecked"}],class:{warn:e.warnTCs},attrs:{id:e.crowdF.slug.current,type:"checkbox"},domProps:{checked:Array.isArray(e.tcChecked)?e._i(e.tcChecked,null)>-1:e.tcChecked},on:{click:function(t){e.warnTCs=!1},change:function(t){var r=e.tcChecked,o=t.target,n=!!o.checked;if(Array.isArray(r)){var d=e._i(r,null);o.checked?d<0&&(e.tcChecked=r.concat([null])):d>-1&&(e.tcChecked=r.slice(0,d).concat(r.slice(d+1)))}else e.tcChecked=n}}}),r("label",{attrs:{for:e.crowdF.slug.current}},[e._v("By buying you agree to the\n            "),r("a",{class:{greyedOut:!e.started&&!e.ended},attrs:{href:e.crowdF.tc,target:"_blank"}},[e._v("Terms and Conditions")]),e._v("."),r("br"),e._v("Delivery included")])],1)])]),e._v(" "),r("div",{staticClass:"progress"},[r("span",{style:{visibility:e.cfbInfo.current>=e.crowdF.maxSold?"visible":"hidden"}},[e._v("FUNDED")]),e._v(" "),r("div",{staticClass:"progressBar"},[r("span",{staticClass:"value",style:{width:e.cfbInfo.current/e.crowdF.maxSold*100+"%"}},[e.cfbInfo.current>0&&e.cfbInfo.current<e.crowdF.maxSold?r("span",{staticClass:"label",style:{right:99.5-e.cfbInfo.current/e.crowdF.maxSold*100+"%"}},[e._v(e._s(e.cfbInfo.current))]):e._e(),e._v(" "),e.cfbInfo.min<=e.crowdF.maxSold-e.crowdF.maxSold/4&&e.cfbInfo.min>0?r("span",{staticClass:"minMark",style:{left:e.cfbInfo.min/e.crowdF.maxSold*100+"%"}},[r("span",{staticClass:"minText"},[e._v("MIN")])]):e._e(),e._v(" "),r("span",{staticClass:"labelMimax max"},[e._v("MAX: "+e._s(e.crowdF.maxSold)+" Cases")])])])])])]):r("div",{staticClass:"wrappercardsCrowdCard filler"})}),o,!1,null,null,null);t.default=component.exports},981:function(e,t,r){var content=r(1011);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(55).default)("594a07a4",content,!0,{sourceMap:!1})}}]);