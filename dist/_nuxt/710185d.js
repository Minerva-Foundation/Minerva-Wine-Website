(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1007:function(e,t,r){"use strict";r(979)},1008:function(e,t,r){var n=r(59)(!1);n.push([e.i,'.wrapperCrowdCard{height:730px;display:grid;grid-template-columns:55% 45%;grid-template-rows:65% 35%;grid-template-areas:"info image" "crowdInfo crowdInfo";padding:45px;box-sizing:border-box;border-right:1px solid #ccc;border-bottom:1px solid #ccc;color:#333;background-color:#fff;font-size:max(1em,12px);position:relative}@media screen and (max-height:950px),screen and (max-width:1330px){.wrapperCrowdCard{height:680px}}@media screen and (max-height:900px),screen and (max-width:1180px){.wrapperCrowdCard{height:630px}}@media screen and (max-width:1085px){.wrapperCrowdCard{height:auto}}@media screen and (max-width:525px){.wrapperCrowdCard{padding:32px 32px 35px}}@media screen and (max-width:435px){.wrapperCrowdCard{padding:25px 20px 27px}}.wrapperCrowdCard .info{display:flex;flex-direction:column;margin-right:10px}.wrapperCrowdCard .info>*{margin-bottom:10px}.wrapperCrowdCard .info .title{position:relative;margin-bottom:5px}.wrapperCrowdCard .info .title a{text-decoration:none;color:#333;word-wrap:break-word}.wrapperCrowdCard .info .title .titleText{font-size:max(2.875em,32px);font-family:"Roslindale";word-wrap:break-word}.wrapperCrowdCard .info .title .linkArrow{font-size:1.2em;position:absolute;bottom:12px;margin-left:5px;color:#777}.wrapperCrowdCard .info .shortInfo{color:#777;margin-bottom:20px;margin-top:15px}.wrapperCrowdCard .info .infoItem{font-size:1.05em;color:#333}.wrapperCrowdCard .info .tc .infoItem{display:flex;white-space:nowrap;overflow:hidden;max-width:58%}.wrapperCrowdCard .info .tc .infoItem .fileName{overflow:hidden;text-overflow:ellipsis;direction:rtl;margin-left:-3px}.wrapperCrowdCard .info .meta{display:flex;flex-direction:column}.wrapperCrowdCard .info .catName{color:#777;text-transform:uppercase;font-size:1.05em}.wrapperCrowdCard .info .country{display:flex;align-items:center;margin-bottom:20px}.wrapperCrowdCard .info .country .countryName{text-transform:uppercase;color:#d6a11a;margin-left:15px;font-size:max(1.125em,14px)}.wrapperCrowdCard .info .country .flag img{border:1px solid rgba(0,0,0,.2);max-width:39px;height:39px;border-radius:50%}@media screen and (max-width:643px){.wrapperCrowdCard .info .country .flag img{height:25px;max-width:25px}}.wrapperCrowdCard .timer{margin-top:10px;margin-bottom:50px;color:#777;font-size:1.3em}@media screen and (max-width:643px){.wrapperCrowdCard .timer{margin-top:0;margin-bottom:15px}}.wrapperCrowdCard .timer .time{font-size:1em;color:#333}.wrapperCrowdCard .image{margin-left:20px;cursor:pointer}.wrapperCrowdCard .image .thumbnail{width:100%;height:100%}@media screen and (max-width:1085px){.wrapperCrowdCard .image .thumbnail{max-height:275px}}.wrapperCrowdCard .image .thumbnail img{width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.wrapperCrowdCard .crowdInfo{grid-area:crowdInfo;display:flex;flex-direction:column;justify-content:flex-end}@media screen and (max-width:1085px){.wrapperCrowdCard .crowdInfo{margin-top:40px}}.wrapperCrowdCard .crowdInfo .rest{display:flex}.wrapperCrowdCard .crowdInfo .rest .purchaseInfo{display:flex;flex-direction:column;justify-content:flex-start;margin-right:40px}@media screen and (max-width:435px){.wrapperCrowdCard .crowdInfo .rest .purchaseInfo{margin-right:0;padding-right:20px;box-sizing:border-box}}.wrapperCrowdCard .crowdInfo .rest .purchaseInfo .case{font-size:.875em;color:#777;padding-bottom:5px;padding-right:10px;box-sizing:border-box}.wrapperCrowdCard .crowdInfo .rest .purchaseInfo .price{font-family:"Roslindale";font-size:3.5em}@media screen and (max-width:400px){.wrapperCrowdCard .crowdInfo .rest .purchaseInfo .price{line-height:.7;margin-top:5px}}.wrapperCrowdCard .crowdInfo .rest .purchaseInfo .price .smaller{font-family:"Roslindale";font-size:.5em}.wrapperCrowdCard .crowdInfo .rest .buy{display:flex;flex-direction:column;justify-content:flex-end}.wrapperCrowdCard .crowdInfo .rest .buy .btns{padding-bottom:10px;display:flex}.wrapperCrowdCard .crowdInfo .rest .buy .btns button{min-width:0;padding-left:26px;padding-right:26px;height:59px!important;font-size:1em}@media screen and (max-height:950px),screen and (max-width:1330px){.wrapperCrowdCard .crowdInfo .rest .buy .btns button{height:52px!important}}@media screen and (max-height:900px),screen and (max-width:1180px){.wrapperCrowdCard .crowdInfo .rest .buy .btns button{height:49px!important}}@media screen and (max-width:643px){.wrapperCrowdCard .crowdInfo .rest .buy .btns button{height:42px!important}}@media screen and (max-width:525px){.wrapperCrowdCard .crowdInfo .rest .buy .btns button{padding-left:20px!important;padding-right:20px!important;min-width:0!important;min-height:0!important}}.wrapperCrowdCard .crowdInfo .rest .buy .btns .buttonLight{color:#8b8b8b;border-color:#adadad;border-width:1px;margin-left:12px}.wrapperCrowdCard .crowdInfo .rest .buy .btns .buttonLight:after{content:"MORE INFO";position:relative;bottom:auto;left:auto;width:auto;background-color:transparent}@media screen and (max-width:525px){.wrapperCrowdCard .crowdInfo .rest .buy .btns .buttonLight:after{content:"MORE"}}@media screen and (max-width:435px){.wrapperCrowdCard .crowdInfo .rest .buy .btns .buttonLight:after{content:"ℹ";font-size:1.6em}}.wrapperCrowdCard .crowdInfo .rest .buy .btns .buttonLight:hover{color:#fff;border-color:#fff}@media screen and (max-width:435px){.wrapperCrowdCard .crowdInfo .rest .buy .btns .buttonLight{padding:0!important;width:39px}}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase{display:flex;position:relative;overflow:visible}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .amountWarning{position:absolute;bottom:100%;left:0;width:180%}@media screen and (max-width:600px){.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .amountWarning{width:188px}}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .amount{border-top-left-radius:7px;border-bottom-left-radius:7px;border:1px solid #adadad;width:40px;color:#777;font-size:1.5em;text-align:center}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .amount:focus{border:1px solid #8b8b8b;outline:none}@media screen and (max-width:525px){.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .amount{width:30px;font-size:1.2em}}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .warn{color:#d6a11a}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .button{border-top-left-radius:0;border-bottom-left-radius:0}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .endedBtn{padding-left:46.3px;padding-right:46.3px;pointer-events:none;border-top-left-radius:7px;border-bottom-left-radius:7px}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .greyedOut{background-color:#bebebe;cursor:default}.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .greyedOut:after,.wrapperCrowdCard .crowdInfo .rest .buy .btns .purchase .greyedOut:before{content:none}.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer{font-size:.81em;display:flex;align-items:flex-start;position:relative}.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer .tcWarningTT{z-index:2;position:absolute;bottom:100%;left:-17px}.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer input{margin-top:1px;margin-right:8px;filter:saturate(0);cursor:pointer}@media screen and (max-height:900px),screen and (max-width:1180px){.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer input{margin-top:0}}.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer .warn{box-shadow:inset 0 0 0 3px #505050;filter:saturate(100%)}.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer label{cursor:pointer}.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer label a{color:#d6a11a}.wrapperCrowdCard .crowdInfo .rest .buy .disclaimer label .greyedOut{color:#777}.wrapperCrowdCard .crowdInfo .lessInfo{padding-bottom:8px}@media screen and (max-width:1085px){.wrapperCrowdCard .crowdInfo .lessInfo{padding-bottom:0}}.wrapperCrowdCard .crowdInfo .progress{display:flex;flex-direction:column;justify-content:flex-end;font-size:.875em;margin-top:20px;margin-bottom:5px;position:relative;color:#777}@media screen and (max-width:400px){.wrapperCrowdCard .crowdInfo .progress{margin-top:35px}}.wrapperCrowdCard .crowdInfo .progress .progressBar{margin-top:5px;width:100%;border-radius:0;height:5px;position:relative;background-color:#e9e9e9;display:flex}.wrapperCrowdCard .crowdInfo .progress .progressBar .value{height:100%;background-color:#d6a11a;display:inline-block}.wrapperCrowdCard .crowdInfo .progress .progressBar .label{position:absolute;bottom:10px;color:#777}.wrapperCrowdCard .crowdInfo .progress .progressBar .labelMimax{position:absolute;top:10px;color:#777}.wrapperCrowdCard .crowdInfo .progress .progressBar .max{right:0}.wrapperCrowdCard .crowdInfo .progress .progressBar .minMark{top:5px;border-right:2px solid #999;position:absolute;height:18px}.wrapperCrowdCard .crowdInfo .progress .progressBar .minMark .minText{position:absolute;top:5px;left:8px}.wrapperCrowdCard .crowdInfo .progress .progress::-webkit-progress-bar{background-color:#e9e9e9}.wrapperCrowdCard .crowdInfo .progress .progress::-webkit-progress-value{background-color:#d6a11a!important}.wrapperCrowdCard .crowdInfo .progress .progress::-moz-progress-bar{background-color:#d6a11a!important}.wrapperCrowdCard .buyingProcess{position:absolute;top:1px;left:1px;width:calc(100% - 2px);height:calc(100% - 2px);background-color:hsla(0,0%,100%,.962);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:10;display:flex;justify-content:center;align-items:center}.wrapperCrowdCard .buyingProcess .content{display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:65%}.wrapperCrowdCard .buyingProcess .content .overlayText{text-align:center;color:#888;font-size:1.6em}.wrapperCrowdCard .buyingProcess .content .overlayTextSmaller{text-align:center;color:#888;font-size:1.2em;margin-top:10px;white-space:pre-line}.wrapperCrowdCard .buyingProcess .content .button{min-width:100px!important;height:auto!important;min-height:45px;padding:0 5px 0 10px;font-size:.85rem;position:relative;margin-top:40px}.wrapperCrowdCard .buyingProcess .content .button .linkArrow{position:relative;padding-left:5px;bottom:1px;color:#eee;font-size:.8em}@media screen and (max-width:530px){.wrapperCrowdCard .buyingProcess .content .button{min-width:120px!important;height:auto!important;min-height:45px;padding:0 5px;font-size:.85rem}}@media screen and (max-width:530px)and (max-width:417px){.wrapperCrowdCard .buyingProcess .content .button{font-size:1rem}}.wrapperCrowdCard .buyingProcess .close{position:absolute;top:20px;right:17px;background-color:transparent;border:none;cursor:pointer}.wrapperCrowdCard .buyingProcess .close svg{width:14px;height:14px}.wrapperCrowdCard .buyingProcess .dot-pulse{margin-top:30px;position:relative;left:-9999px;width:8px;height:8px;border-radius:50%;background-color:#999;color:#999;box-shadow:9999px 0 0 -5px #999;-webkit-animation:dotPulse 1.5s linear infinite;animation:dotPulse 1.5s linear infinite;-webkit-animation-delay:.25s;animation-delay:.25s}.wrapperCrowdCard .buyingProcess .dot-pulse:after,.wrapperCrowdCard .buyingProcess .dot-pulse:before{content:"";display:inline-block;position:absolute;top:0;width:8px;height:8px;border-radius:50%;background-color:#999;color:#999}.wrapperCrowdCard .buyingProcess .dot-pulse:before{box-shadow:9975px 0 0 -5px #999;-webkit-animation:dotPulseBefore 1.5s linear infinite;animation:dotPulseBefore 1.5s linear infinite;-webkit-animation-delay:0s;animation-delay:0s}.wrapperCrowdCard .buyingProcess .dot-pulse:after{box-shadow:10023px 0 0 -5px #999;-webkit-animation:dotPulseAfter 1.5s linear infinite;animation:dotPulseAfter 1.5s linear infinite;-webkit-animation-delay:.5s;animation-delay:.5s}@-webkit-keyframes dotPulseBefore{0%{box-shadow:9975px 0 0 0 #999}30%{box-shadow:9975px 0 0 2px #999}60%,to{box-shadow:9975px 0 0 0 #999}}@keyframes dotPulseBefore{0%{box-shadow:9975px 0 0 0 #999}30%{box-shadow:9975px 0 0 2px #999}60%,to{box-shadow:9975px 0 0 0 #999}}@-webkit-keyframes dotPulse{0%{box-shadow:9999px 0 0 0 #999}30%{box-shadow:9999px 0 0 2px #999}60%,to{box-shadow:9999px 0 0 0 #999}}@keyframes dotPulse{0%{box-shadow:9999px 0 0 0 #999}30%{box-shadow:9999px 0 0 2px #999}60%,to{box-shadow:9999px 0 0 0 #999}}@-webkit-keyframes dotPulseAfter{0%{box-shadow:10023px 0 0 0 #999}30%{box-shadow:10023px 0 0 2px #999}60%,to{box-shadow:10023px 0 0 0 #999}}@keyframes dotPulseAfter{0%{box-shadow:10023px 0 0 0 #999}30%{box-shadow:10023px 0 0 2px #999}60%,to{box-shadow:10023px 0 0 0 #999}}.filler{background-color:transparent;border:none}@media screen and (max-width:1085px){.filler{height:0;padding:0}}.large{grid-template-columns:65% 35%}.large .info{display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;justify-content:flex-start;position:relative;font-size:1.15em}.large .info>*{min-width:100%}.large .info .title{font-size:1.1em}.large .info .country{position:relative;top:-10px;font-size:1.1em}.large .info .meta{position:relative;top:0;min-width:40%}.large .info .date,.large .info .tc,.large .info .vintage{top:0}.large .rest{grid-gap:50px;gap:50px;position:relative}.large .timer{top:10px;position:relative;display:flex;height:28px;flex-direction:column}.large .progressBar{height:6px!important}.soonCard{position:relative}.soonCard .soonText{grid-area:crowdInfo;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:4em;color:#777;font-family:"Roslindale";box-sizing:border-box}@media screen and (max-width:1085px){.soonCard .soonText{padding-top:50px}}@media screen and (max-width:450px){.soonCard .soonText{font-size:2.8em}}.soonCard .soonText .smaller{font-size:.25em;display:flex;justify-content:center}@media screen and (max-width:450px){.soonCard .soonText .smaller{font-size:.4em}}.soonCard .soonText .smaller img{margin-left:7px;margin-top:-1px;height:17px;filter:invert(46%) sepia(0) saturate(1258%) hue-rotate(193deg) brightness(102%) contrast(105%)}@media screen and (max-width:450px){.soonCard .soonText .smaller img{height:15px}}',""]),e.exports=n},947:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return I})),r.d(t,"d",(function(){return k})),r.d(t,"c",(function(){return F})),r.d(t,"e",(function(){return O}));var n,o,c,d,l,f=r(922),m=r(23),w=r(944),h=(r(79),r(39),r(165),r(303),r(938),r(923)),x=[];function C(e){for(var t=(new Date).getTime(),r=[],i=0;i<e.length;i++){Date.parse(e[i].end.toString())-t<-6e4&&(r.push(e[i]),e.splice(i--,1))}return e.push.apply(e,Object(w.a)(r.reverse())),e}function v(e){return y.apply(this,arguments)}function y(){return(y=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(h.a)(n||(n=Object(f.a)(['*[_type == "crowdfund" ]{merchant->{flag,title,slug},start,maxSold,end,contract,cardImage,country,date,soon,shortInfo,slug,tc,type,variety,vintage}  | order(start asc)']))),e.next=3,t.fetch(r);case 3:return o=e.sent,e.abrupt("return",C(o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(h.a)(o||(o=Object(f.a)(['*[_type == "crowdfund" && merchant._ref == "','"]{merchant->{flag,title,slug},maxSold,detail1,detail2,detail3,soon,artwork,start,end,contract,cardImage,country,acidity,body,fruitiness,date,shortInfo,slug,tc,type,variety,vintage}  | order(start asc)'])),t),e.next=3,r.fetch(n);case 3:return c=e.sent,e.abrupt("return",C(c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return T.apply(this,arguments)}function T(){return(T=Object(m.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(h.a)(c||(c=Object(f.a)(['*[_type == "crowdfund" && slug.current == "','"]{merchant->{flag,title,slug},maxSold,detail1,detail2,bottleimage,detail3,soon,bottleCount,addDetails,varietyFirst,artwork,start,end,contract,cardImage,country,acidity,body,fruitiness,date,shortInfo,slug,tc,type,variety,vintage}'])),t),e.next=3,r.fetch(n);case 3:return o=e.sent[0],e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return S.apply(this,arguments)}function S(){return(S=Object(m.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=x.find((function(e){return e.contract===t})))){e.next=5;break}return e.abrupt("return",n.placeholders);case 5:return o=Object(h.a)(d||(d=Object(f.a)(['*[_type == "crowdfund" && contract == "','"]{maxBuy,price}'])),t),e.next=8,r.fetch(o);case 8:return c=e.sent[0],x.push({placeholders:c,contract:t}),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return P.apply(this,arguments)}function P(){return(P=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(h.a)(l||(l=Object(f.a)(['*[_type == "crowdfund"]{slug{current}}']))),e.next=3,t.fetch(r);case 3:return n=e.sent,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},958:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(290),o=Object(n.b)({network:{chainID:"bombay-12",lcd:"https://bombay-lcd.terra.dev",name:"testnet"}})},960:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"smaller"},[e._v("Quality Wines"),n("img",{attrs:{src:r(234),alt:"Minerva logo"}})])}],o=r(23),c=(r(91),r(933),r(39),r(133),r(93),r(165),r(136),r(137),r(79),r(4)),d=r(24),l=r(958),f=r(975),m=r(51),w=r(210),h=c.a.extend({name:"CrowdfundCard",props:{crowdF:{type:Object,required:!0},large:{type:Boolean,required:!1,default:!1},onDetailSite:{type:Boolean,required:!1,default:!1}},data:function(){return{cfbInfo:{},amount:1,timeLeft:"",timeToStart:"",started:!1,ended:!1,tcFileName:"",amountOverMax:!1,loadingChainData:!0,prevAmount:1,polling:null,timecalc:null,chainRefreshIntervall:5e3,chainPolling:!1,gasEstimate:0,wallet:{},controllerGetTries:0,walletController:{},status:"",subscription:null,tcChecked:!1,warnTCs:!1,loading:!1,overlay:!1,queryBuyTX:!1,overlayText:"",overlayTextSmaller:"",showMWLink:!1,txInfoTries:0}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.crowdF.soon){t.next=7;break}return t.next=3,Object(f.a)(e.crowdF.contract,e.$sanity);case 3:r=t.sent,e.loadingChainData=!1,e.cfbInfo=r,e.waitForController();case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){this.getTimeLeft()},beforeDestroy:function(){clearInterval(this.polling),clearInterval(this.timecalc),this.subscription&&this.subscription.unsubscribe()},methods:{buy:function(){var e,t=this;this.overlayText="",this.overlayTextSmaller="",this.showMWLink=!1,this.ended||("ready"===this.status?this.tcChecked?(this.overlay=!0,this.warnTCs=!1,l.a.config.chainID!==(null===(e=this.wallet)||void 0===e?void 0:e.network.chainID)?(this.overlayText="Please conntect your wallet to the "+("bombay-12"===l.a.config.chainID?l.a.config.chainID+" testnet":"columbus-5"===l.a.config.chainID?l.a.config.chainID+" mainnet":l.a.config.chainID+" network")+" and reload the page!",setTimeout((function(){t.overlay=!1}),3e3)):(this.loading=!0,this.overlayText="Confirm the purchase of "+this.amount+(1===this.amount?" case":" cases")+" for a total of "+this.cfbInfo.price*Number(this.amount)+" UST in your wallet.",this.postTx())):this.warnTCs=!0:(Object(w.a)(!0),this.tcChecked?this.queryBuyTX=!0:(this.warnTCs=!0,this.queryBuyTX=!1)))},subscribeWallet:function(){var e=this;this.subscription=this.walletController.connectedWallet().subscribe((function(t){var r;e.wallet=t,t?t.availablePost?(e.status="ready",e.queryBuyTX&&(e.overlay=!0,e.warnTCs=!1,l.a.config.chainID!==(null===(r=e.wallet)||void 0===r?void 0:r.network.chainID)?(e.overlayText="Please conntect your wallet to the "+("bombay-12"===l.a.config.chainID?l.a.config.chainID+" testnet":"columbus-5"===l.a.config.chainID?l.a.config.chainID+" mainnet":l.a.config.chainID+" network")+" and reload the page!",setTimeout((function(){e.overlay=!1}),3e3)):(e.loading=!0,e.overlayText="Confirm the purchase of "+e.amount+(1===e.amount?" case":" cases")+" for a total of "+e.cfbInfo.price*Number(e.amount)+" UST in your wallet.",e.postTx()))):e.status="can-not-post":e.status="not-connected"}))},getTxInfo:function(e,t){var r=this;return new Promise((function(n,o){setInterval((function(){t.txInfo(e.result.txhash).then((function(e){n(e)})).catch((function(){r.txInfoTries++>=15&&o(new Error("Timed out"))}))}),1e3)}))},postTx:function(){var e=this;if(this.wallet){var t=new d.TxAPI(l.a),r=new d.MsgExecuteContract(this.wallet.terraAddress,this.crowdF.contract,{purchase:{number_of_tokens:Number(this.amount)}},[new d.Coin("uusd",Number(this.amount)*this.cfbInfo.price*1e6)]);l.a.auth.accountInfo(this.wallet.terraAddress).then((function(n){var o=n;t.estimateFee([{sequenceNumber:o.sequence}],{msgs:[r]}).then((function(n){e.wallet&&e.wallet.post({msgs:[r],fee:n}).then((function(r){e.overlayText="Processing",e.getTxInfo(r,t).then((function(t){if(e.loading=!1,e.showMWLink=!0,e.overlayText="Success!",e.overlayTextSmaller=" You will receive your wine after the crowdfund"+(e.cfbInfo.min>0&&e.cfbInfo.min>e.cfbInfo.current?" and if the minimum of "+e.cfbInfo.min+" cases sold is reached. Otherwise you will be refunded":"")+".",null==t?void 0:t.logs){var r=t.logs[0].eventsByType.from_contract.number_of_tokens_purchased[0];r<e.amount&&(e.overlayTextSmaller=e.overlayTextSmaller+"\n Only "+r+(1===Number(r)?" case was":" cases were ")+" purchased due to reaching the maximum purchase limit or selling out. Excess UST was returned.")}setTimeout((function(){e.overlay=!1}),12e3)})).catch((function(){e.loading=!1,e.overlayText="Something went wrong! Please try again.",setTimeout((function(){e.overlay=!1}),5e3)}))})).catch((function(){e.loading=!1,e.overlayText="Something went wrong! Please try again.",setTimeout((function(){e.overlay=!1}),5e3)}))})).catch((function(){e.loading=!1,e.overlayText="Something went wrong!",e.overlayTextSmaller="Either you do not have enough UST or you reached your maximum purchase limit.",setTimeout((function(){e.overlay=!1}),6e3)}))}))}},waitForController:function(){var e=this;void 0===Object(m.a)()&&this.controllerGetTries++<10?setTimeout((function(){e.waitForController()}),50):(this.walletController=Object(m.a)(),this.subscribeWallet())},getChainData:function(){var e=this;this.polling=setInterval((function(){Object(f.a)(e.crowdF.contract,e.$sanity).then((function(t){e.cfbInfo=t}))}),this.chainRefreshIntervall)},getTimeLeft:function(){var e=this;this.timecalc=setInterval((function(){var t=(new Date).getTime(),r=Date.parse(e.crowdF.start)-t,n=Date.parse(e.crowdF.end)-t;if(e.cfbInfo.current>=e.crowdF.maxSold)e.ended=!0,e.chainPolling&&(clearInterval(e.polling),e.chainPolling=!1),clearInterval(e.timecalc);else if(r>0&&!e.cfbInfo.started){e.ended=!1,r<6e4&&(e.chainRefreshIntervall=1e3,e.chainPolling||(e.getChainData(),e.chainPolling=!0));var o=Math.floor(r/864e5),c=Math.floor(r%864e5/36e5),d=Math.floor(r%36e5/6e4)+1;e.timeToStart=o+"d "+c+"h "+d+"m "}else if(r<0&&!e.cfbInfo.started&&n>0)e.ended=!1,e.timeToStart="...",500!==e.chainRefreshIntervall&&(e.chainRefreshIntervall=500,clearInterval(e.polling),e.getChainData()),e.chainPolling||(e.getChainData(),e.chainPolling=!0);else if(n>0&&e.cfbInfo.started){e.started=!0,e.ended=!1,5e3!==e.chainRefreshIntervall&&(e.chainRefreshIntervall=5e3,clearInterval(e.polling),e.getChainData()),e.chainPolling||(e.getChainData(),e.chainPolling=!0);var l=Math.floor(n/864e5),f=Math.floor(n%864e5/36e5),m=Math.floor(n%36e5/6e4)+1;e.timeLeft=l+"d "+f+"h "+m+"m "}else e.ended=!0,e.chainPolling&&(clearInterval(e.polling),e.chainPolling=!1),clearInterval(e.timecalc)}),1e3)},isAllowed:function(e){var t=this,r=Array.from({length:this.cfbInfo.maxBuy},(function(e,t){return(t+1).toString()}));this.prevAmount="",r.includes(this.amount.toString()+e.key.toString())?this.amountOverMax=!1:(e.preventDefault(),this.amountOverMax=!0,"0"===e.key.toString()?this.amount=1:this.amount=this.cfbInfo.maxBuy,setTimeout((function(){t.amountOverMax=!1}),2e3))},preventSelect:function(e){e.target.selectionStart=e.target.selectionEnd},clearAmoung:function(){this.prevAmount=this.amount,this.amount=""},restorePrevAmount:function(){""!==this.prevAmount&&(this.amount=this.prevAmount),""===this.amount&&(this.amount=1)}}}),x=(r(1007),r(29)),component=Object(x.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return"filler"!==e.crowdF.slug.current.substring(0,6)?r("div",{staticClass:"wrapperCrowdCard",class:{large:e.large,soonCard:e.crowdF.soon}},[e.overlay?r("div",{staticClass:"buyingProcess"},[r("button",{staticClass:"close",on:{click:function(t){e.overlay=!1,e.loading=!1}}},[r("svg",{attrs:{viewBox:"0 0 24 24"}},[r("path",{attrs:{fill:"#999",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}})])]),e._v(" "),r("div",{staticClass:"content"},[""!==e.overlayText?r("span",{staticClass:"overlayText"},[e._v(e._s(e.overlayText))]):e._e(),e._v(" "),""!==e.overlayTextSmaller?r("span",{staticClass:"overlayTextSmaller"},[e._v(e._s(e.overlayTextSmaller))]):e._e(),e._v(" "),e.showMWLink?r("NuxtLink",{attrs:{to:"/club/myClub/myAssets"}},[r("button",{staticClass:"button"},[e._v("\n          MY WINE"),r("span",{staticClass:"linkArrow"},[e._v("↗")])])]):e._e(),e._v(" "),e.loading?r("div",{staticClass:"dot-pulse"}):e._e()],1)]):e._e(),e._v(" "),r("div",{staticClass:"info"},[r("div",{staticClass:"title"},[r("NuxtLink",{attrs:{to:"/wine/"+e.crowdF.merchant.slug.current}},[r("span",{staticClass:"titleText"},[e._v(e._s(e.crowdF.merchant.title))]),r("span",{staticClass:"linkArrow"},[e._v("↗")])])],1),e._v(" "),r("div",{staticClass:"country"},[r("portableImage",{staticClass:"flag",attrs:{asset:e.crowdF.merchant.flag.asset,"new-height":"40",alt:e.crowdF.country+" flag"}}),e._v(" "),r("span",{staticClass:"countryName"},[e._v(e._s(e.crowdF.country))])],1),e._v(" "),r("div",{staticClass:"variety meta"},[r("span",{staticClass:"catName"},[e._v("Variety")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.variety))])]),e._v(" "),r("div",{staticClass:"type meta"},[r("span",{staticClass:"catName"},[e._v("Type")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.type))])]),e._v(" "),r("div",{staticClass:"vintage meta"},[r("span",{staticClass:"catName"},[e._v("Vintage")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.vintage))])]),e._v(" "),r("div",{staticClass:"date meta"},[r("span",{staticClass:"catName"},[e._v("Delivery Snapshot Date")]),r("span",{staticClass:"infoItem"},[e._v(e._s(e.crowdF.soon?"...":e.crowdF.date))])]),e._v(" "),r("div",{staticClass:"tc meta"},[r("span",{staticClass:"catName"},[e._v("Terms & Conditions")]),e._v(" "),r("a",{staticClass:"infoItem tcEllipsis",attrs:{href:e.crowdF.tc,target:"_blank",title:e.crowdF.tc}},[e.crowdF.soon?e._e():r("div",[e._v("https://ww")]),e._v(" "),r("div",{staticClass:"fileName"},[e._v("\n          "+e._s(e.crowdF.soon?"...":e.crowdF.tc)+"\n        ")])])]),e._v(" "),e.crowdF.soon?e._e():r("div",{staticClass:"timer"},[r("span",{staticClass:"timerLabel"},[e._v(e._s(e.ended?"":e.started?"TIME LEFT":e.loadingChainData?"":"STARTS IN"))]),r("span",{staticClass:"time"},[e._v("\n        "+e._s(e.ended?"":e.started?e.timeLeft:e.timeToStart))])])]),e._v(" "),r("div",{staticClass:"image",on:{click:function(t){return e.$router.push({path:"/wine/"+e.crowdF.merchant.slug.current})}}},[r("portableImage",{staticClass:"thumbnail",attrs:{asset:e.crowdF.cardImage.asset,"new-height":"1000",alt:e.crowdF.merchant.title+" Crowdloan Thumbnail"}})],1),e._v(" "),e.crowdF.soon?r("div",{staticClass:"soonText"},[e._v("\n    COMING SOON"),e._m(0)]):e._e(),e._v(" "),e.crowdF.soon?e._e():r("div",{staticClass:"crowdInfo"},[r("div",{staticClass:"rest",class:{lessInfo:e.ended}},[r("div",{staticClass:"purchaseInfo"},[r("span",{staticClass:"case"},[e._v("Case Of 6 Bottles")]),e._v(" "),r("span",{staticClass:"price"},[e._v(e._s(e.cfbInfo.price)+" "),r("span",{staticClass:"smaller"},[e._v("UST")])])]),e._v(" "),r("div",{staticClass:"buy"},[r("div",{staticClass:"btns"},[r("div",{staticClass:"purchase"},[e.amountOverMax?r("infoWarningTooltip",{staticClass:"amountWarning",attrs:{text:"Max possible amount is "+e.cfbInfo.maxBuy,upsidedown:!0}}):e._e(),e._v(" "),e.ended?e._e():r("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"amount"}],staticClass:"amount noselect",class:{warn:e.amountOverMax},attrs:{type:"text",title:"Max: "+e.cfbInfo.maxBuy},domProps:{value:e.amount},on:{select:function(t){return e.preventSelect(t)},keypress:function(t){return e.isAllowed(t)},focus:e.clearAmoung,blur:e.restorePrevAmount,input:function(t){t.target.composing||(e.amount=t.target.value)}}}),e._v(" "),r("button",{staticClass:"button",class:{greyedOut:!e.started&&!e.ended,endedBtn:e.ended},attrs:{title:"Max: "+e.cfbInfo.maxBuy},on:{click:function(t){return t.stopPropagation(),e.buy.apply(null,arguments)}}},[e._v("\n              "+e._s(e.ended?" ENDED ":"BUY NOW")+"\n            ")])],1),e._v(" "),e.onDetailSite?r("a",{on:{click:function(t){return e.$emit("infoClicked")}}},[r("button",{staticClass:"buttonLight"})]):r("NuxtLink",{attrs:{to:{path:"/wine/cf/"+e.crowdF.slug.current}}},[r("button",{staticClass:"buttonLight"})])],1),e._v(" "),e.ended?e._e():r("span",{staticClass:"disclaimer"},[e.warnTCs?r("infoWarningTooltip",{staticClass:"tcWarningTT",attrs:{upsidedown:!0,text:"Please accept the Terms and Conditions"}}):e._e(),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.tcChecked,expression:"tcChecked"}],class:{warn:e.warnTCs},attrs:{id:e.crowdF.slug.current,type:"checkbox"},domProps:{checked:Array.isArray(e.tcChecked)?e._i(e.tcChecked,null)>-1:e.tcChecked},on:{click:function(t){e.warnTCs=!1},change:function(t){var r=e.tcChecked,n=t.target,o=!!n.checked;if(Array.isArray(r)){var c=e._i(r,null);n.checked?c<0&&(e.tcChecked=r.concat([null])):c>-1&&(e.tcChecked=r.slice(0,c).concat(r.slice(c+1)))}else e.tcChecked=o}}}),r("label",{attrs:{for:e.crowdF.slug.current}},[e._v("By buying you agree to the\n            "),r("a",{class:{greyedOut:!e.started&&!e.ended},attrs:{href:e.crowdF.tc,target:"_blank"}},[e._v("Terms and Conditions")]),e._v("."),r("br"),e._v("Delivery included")])],1)])]),e._v(" "),r("div",{staticClass:"progress"},[r("span",{style:{visibility:e.cfbInfo.current>=e.crowdF.maxSold?"visible":"hidden"}},[e._v("FUNDED")]),e._v(" "),r("div",{staticClass:"progressBar"},[r("span",{staticClass:"value",style:{width:e.cfbInfo.current/e.crowdF.maxSold*100+"%"}},[e.cfbInfo.current>0&&e.cfbInfo.current<e.crowdF.maxSold?r("span",{staticClass:"label",style:{right:99.5-e.cfbInfo.current/e.crowdF.maxSold*100+"%"}},[e._v(e._s(e.cfbInfo.current))]):e._e(),e._v(" "),e.cfbInfo.min<=e.crowdF.maxSold-e.crowdF.maxSold/4&&e.cfbInfo.min>0?r("span",{staticClass:"minMark",style:{left:e.cfbInfo.min/e.crowdF.maxSold*100+"%"}},[r("span",{staticClass:"minText"},[e._v("MIN")])]):e._e(),e._v(" "),r("span",{staticClass:"labelMimax max"},[e._v("MAX: "+e._s(e.crowdF.maxSold)+" Cases")])])])])])]):r("div",{staticClass:"wrapperCrowdCard filler"})}),n,!1,null,null,null);t.default=component.exports},975:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return x}));var n=r(23),o=(r(79),r(39),r(165),r(933),r(110),r(94),r(133),r(93),r(62),r(73),r(134),r(135),r(95),r(958));function c(e,t){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.wasm.contractQuery(t,r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=r(947);function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function w(e,t){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var o,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=!0,e.next=3,c(t,{state:{}}).catch(Object(n.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.c)(t,r);case 2:return n=e.sent,o={price:{amount:(1e6*n.price).toString(),denom:"uusd"},min_tokens_sold:"0",amount_sold:"0",max_amount_per_wallet:n.maxBuy},d=!1,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))));case 3:return o=e.sent,f={price:Number(o.price.amount)/1e6,min:Number(o.min_tokens_sold),current:Number(o.amount_sold),maxBuy:o.max_amount_per_wallet,started:d},e.abrupt("return",f);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return C.apply(this,arguments)}function C(){return(C=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o,d,m,w,h,x,C,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,Object(l.e)(r);case 3:o=e.sent,d=f(o),e.prev=5,d.s();case 7:if((m=d.n()).done){e.next=39;break}return w=m.value,e.prev=9,e.next=12,c(w.slug.current,{tokens:{owner:t}});case 12:h=e.sent,x=f(h.tokens),e.prev=14,x.s();case 16:if((C=x.n()).done){e.next=24;break}return v=C.value,e.next=20,c(w.slug.current,{nft_info:{token_id:v.toString()}});case 20:y=e.sent,n.push(y);case 22:e.next=16;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(14),x.e(e.t0);case 29:return e.prev=29,x.f(),e.finish(29);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(9),console.log("Was no NFT contract");case 37:e.next=7;break;case 39:e.next=44;break;case 41:e.prev=41,e.t2=e.catch(5),d.e(e.t2);case 44:return e.prev=44,d.f(),e.finish(44);case 47:return e.abrupt("return",n);case 48:case"end":return e.stop()}}),e,null,[[5,41,44,47],[9,34],[14,26,29,32]])})))).apply(this,arguments)}},979:function(e,t,r){var content=r(1008);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(60).default)("594a07a4",content,!0,{sourceMap:!1})}}]);